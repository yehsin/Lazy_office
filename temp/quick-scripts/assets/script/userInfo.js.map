{"version":3,"sources":["userInfo.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"../../../../assets/script","sourcesContent":["// Learn TypeScript:\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/typescript.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/manual/en/scripting/typescript.html\n// Learn Attribute:\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/manual/en/scripting/reference/attributes.html\n// Learn life-cycle callbacks:\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/manual/en/scripting/life-cycle-callbacks.html\n\nconst {ccclass, property} = cc._decorator;\n\n@ccclass\nexport default class userInfo extends cc.Component {\n\n\n    @property(cc.Node)\n    startBtn: cc.Node = null;\n\n    @property(cc.Node)\n    userNameNode: cc.Node = null;\n\n    @property(cc.Node)\n    officeNode: cc.Node = null;\n\n    @property(cc.Node)\n    HscoreNode: cc.Node = null;\n\n    @property({ type: cc.AudioClip })\n    bgm_music: cc.AudioClip = null;\n\n    @property({ type: cc.AudioClip })\n    click_start_sound: cc.AudioClip = null;\n\n    private userName:string;\n    private officeLevel:string;\n    private Hscore:string;\n    private user_ID:string;\n\n    private loadUserData() {\n\n      var userEmail = firebase.auth().currentUser.email;\n      let split_name = userEmail.split('@');\n      this.user_ID = split_name[0];\n        \n    \n        var scene = cc.director.getScene().name;\n    \n        cc.log(scene,\" | read user \" , this.user_ID , \" data\");\n\n        var usernamenode = this.userNameNode; \n        var officenode = this.officeNode;\n        var Hscorenode = this.HscoreNode;\n    \n    \n        var userRef = firebase.database().ref(\"/user/\" + this.user_ID);\n        userRef.once(\"value\", (snapshot) => {\n          cc.log(\n            snapshot.val().HScore, // Highest score\n            snapshot.val().office,\n          );\n          \n          this.Hscore = snapshot.val().HScore;\n          this.officeLevel = snapshot.val().office;\n    \n          officenode.getComponent(cc.Label).string = this.officeLevel.toString();\n          Hscorenode.getComponent(cc.Label).string = this.Hscore.toString();\n          usernamenode.getComponent(cc.Label).string = this.user_ID.toString();\n    \n          cc.log(\"level:\",this.officeLevel);\n          cc.log(\"Hscore:\",this.Hscore);\n    \n          \n        });\n\n        userRef.update({\n          Score: '0',\n          status: 'start',\n          time: '180',\n          bossState:'sleep'\n        })\n      }\n\n\n\n    private gameStart(){\n        cc.audioEngine.playEffect(this.click_start_sound,false);\n        cc.audioEngine.pauseAll();\n        cc.log(\"startBtn clicked\");\n        cc.director.loadScene(\"working\");\n    }\n\n\n\n    // LIFE-CYCLE CALLBACKS:\n\n    onLoad () {\n        cc.director.preloadScene(\"working\", function () {\n          cc.log(\"Next scene preloaded\");\n      });\n        \n        this.loadUserData();\n        this.startBtn.on('click',()=>{\n          cc.log('start btn click');\n          cc.audioEngine.playEffect(this.click_start_sound,false);\n          //cc.audioEngine.pauseAll();\n          cc.director.loadScene(\"working\");\n\n      });\n    }\n\n    start () {\n\n        cc.audioEngine.play(this.bgm_music,true,0.3);\n\n    }\n\n    // update (dt) {}\n}\n"]}