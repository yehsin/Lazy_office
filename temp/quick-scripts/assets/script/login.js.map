{"version":3,"sources":["login.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"../../../../assets/script","sourcesContent":["// Learn TypeScript:\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/typescript.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/manual/en/scripting/typescript.html\n// Learn Attribute:\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/manual/en/scripting/reference/attributes.html\n// Learn life-cycle callbacks:\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/manual/en/scripting/life-cycle-callbacks.html\n\nconst {ccclass, property} = cc._decorator;\n\nlet username = '';\nlet password = '';\n\n@ccclass\nexport default class login extends cc.Component {\n\n    @property(cc.Node)\n    input: cc.Node = null;\n\n    @property(cc.Node)\n    enter: cc.Node = null;\n\n    @property(cc.Node)\n    switch: cc.Node = null;\n\n\n    @property(cc.Node)\n    icon: cc.Node = null;\n\n    @property(cc.Node)\n    user: cc.Node = null;\n    \n    @property(cc.Node)\n    Logup: cc.Node = null;\n\n    @property(cc.Label)\n    inup_set:cc.Label = null;\n\n    private logup: boolean = false;\n    private isuser = false;\n    private ispass = false;\n\n    onLoad(){\n        this.switch.on('click',()=>{\n            if(this.logup==false){ //login\n                this.logup = true;\n                this.switch.getChildByName('switch_login').opacity = 0;\n                this.switch.getChildByName('switch_signup').opacity = 255;\n\n            }\n            else{\n                this.logup = false;\n                this.switch.getChildByName('switch_signup').opacity = 0;\n                this.switch.getChildByName('switch_login').opacity = 255;\n                \n\n            }\n            cc.log('switch',this.logup);\n        });\n        this.enter.on('click',()=>{\n            this.login_data();\n            cc.log('aaa');\n        });\n        this.Logup.on('click',()=>{\n            //cc.log('change');\n            //var type = this.Logup.getComponent(cc.Label).string;\n            var type = this.inup_set.string;\n            cc.log(type,'change');\n            if(type == \"sign up\"){\n                this.logup = false;\n                //this.Logup.getChildByName('Label').getComponent(cc.Label).string = 'login';\n                this.inup_set.string = 'log in';\n            }\n            else{\n                this.logup = true;\n                //this.Logup.getChildByName('Label').getComponent(cc.Label).string = 'logup';\n                this.inup_set.string = 'sign up';\n\n            }\n            \n        })\n    }\n\n    login_data(){\n        if(!this.isuser){\n            if(this.input.getComponent(cc.EditBox).string != ''){\n                username = this.input.getComponent(cc.EditBox).string;\n                this.input.getComponent(cc.EditBox).string = '';\n\n                this.icon.opacity = 255;\n                this.user.opacity = 255;\n                this.user.getComponent(cc.Label).string = username;\n                this.isuser = true;\n            }\n            \n        }\n\n        else if(!this.ispass){\n            if(this.input.getComponent(cc.EditBox).string != ''){\n                password = this.input.getComponent(cc.EditBox).string;\n            }\n            if(!this.logup){\n                firebase.auth().signInWithEmailAndPassword(username,password).then(()=>{\n                    cc.log('displayname:',firebase.auth().currentUser.email);\n                    cc.director.loadScene('userInfo'); //check\n                }).catch((error)=>{\n                    alert(error);\n                    this.isuser = false;\n                    this.ispass = false;\n                    this.icon.opacity = 0;\n                    this.user.opacity = 0;\n\n                })\n            }\n            else { // logup\n                firebase.auth().createUserWithEmailAndPassword(username,password).then(()=>{\n                    let User = username.split('@');\n                    let userEmail = User[0];\n                    firebase.auth().currentUser.displayname = userEmail;\n                    cc.log('displayname:',firebase.auth().currentUser.displayname);\n                    //currentuser.displayname\n                    firebase.database().ref('/user/' + userEmail).set({\n                        time: '180',\n                        status: 'start',\n                        minigameScore: '0',\n                        Score: '0',\n                        HScore: '0',// check\n                        totalScore:'0',\n                        office: 'BASIC' //check\n                    });\n                    cc.director.loadScene('userInfo'); //check\n                }).catch((error)=>{\n                    alert(error);\n                    this.isuser = false;\n                    this.ispass = false;\n                    this.icon.opacity = 0;\n                    this.user.opacity = 0;\n\n                })\n    \n                \n            }\n\n        }\n\n        \n    }\n}\n"]}