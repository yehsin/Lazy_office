{"version":3,"sources":["gameover.ts"],"names":[],"mappings":";;;;AAAA,oBAAoB;AACpB,kFAAkF;AAClF,yFAAyF;AACzF,mBAAmB;AACnB,4FAA4F;AAC5F,mGAAmG;AACnG,8BAA8B;AAC9B,4FAA4F;AAC5F,mGAAmG;;AAI7F,IAAA,kBAAmC,EAAlC,oBAAO,EAAE,sBAAyB,CAAC;AAG1C;IAAsC,4BAAY;IADlD;QAAA,qEAyEC;QArEG,gBAAU,GAAW,IAAI,CAAC;QAG1B,aAAO,GAAW,IAAI,CAAC;QAGvB,eAAS,GAAW,IAAI,CAAC;QAGzB,kBAAY,GAAiB,IAAI,CAAC;QAGlC,WAAK,GAAiB,IAAI,CAAC;;QAwD3B,iBAAiB;IACrB,CAAC;IApDG,wBAAwB;IAExB,yBAAM,GAAN;QAAA,iBAqCC;QApCG,EAAE,CAAC,QAAQ,CAAC,YAAY,CAAC,SAAS,EAAE;YAChC,EAAE,CAAC,GAAG,CAAC,sBAAsB,CAAC,CAAC;QACnC,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,UAAU,CAAC,EAAE,CAAC,OAAO,EAAC;YACvB,EAAE,CAAC,WAAW,CAAC,OAAO,EAAE,CAAC;YACzB,EAAE,CAAC,WAAW,CAAC,UAAU,CAAC,KAAI,CAAC,KAAK,EAAC,KAAK,CAAC,CAAC;YAC5C,EAAE,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC;YAClB,EAAE,CAAC,QAAQ,CAAC,SAAS,CAAC,UAAU,CAAC,CAAC;QACtC,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,OAAO,CAAC,EAAE,CAAC,OAAO,EAAC;YACpB;;;;cAIE;YACH,EAAE,CAAC,WAAW,CAAC,OAAO,EAAE,CAAC;YACzB,EAAE,CAAC,WAAW,CAAC,UAAU,CAAC,KAAI,CAAC,KAAK,EAAC,KAAK,CAAC,CAAC;YAC5C,MAAM,CAAC,KAAK,EAAE,CAAC;QAClB,CAAC,CAAC,CAAC;QAEH,IAAI,SAAS,GAAG,QAAQ,CAAC,IAAI,EAAE,CAAC,WAAW,CAAC,KAAK,CAAC;QAClD,IAAI,UAAU,GAAG,SAAS,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;QACtC,IAAI,CAAC,OAAO,GAAG,UAAU,CAAC,CAAC,CAAC,CAAC;QAC7B,EAAE,CAAC,GAAG,CAAC,YAAY,EAAC,IAAI,CAAC,OAAO,EAAE,MAAM,CAAC,CAAC;QAE1C,IAAI,OAAO,GAAG,QAAQ,CAAC,QAAQ,EAAE,CAAC,GAAG,CAAC,QAAQ,GAAG,IAAI,CAAC,OAAO,CAAC,CAAC;QAC/D,OAAO,CAAC,EAAE,CAAC,OAAO,EAAE,UAAC,QAAQ;YACzB,IAAI,KAAK,GAAU,QAAQ,CAAC,GAAG,EAAE,CAAC,KAAK,CAAC;YACxC,KAAI,CAAC,SAAS,CAAC,YAAY,CAAC,EAAE,CAAC,KAAK,CAAC,CAAC,MAAM,GAAG,MAAM,CAAC,KAAK,CAAC,CAAC;QACjE,CAAC,CAAC,CAAA;IAKN,CAAC;IAED,wBAAK,GAAL;QACI,EAAE,CAAC,WAAW,CAAC,UAAU,CAAC,IAAI,CAAC,YAAY,EAAC,KAAK,CAAC,CAAC;QAEnD,IAAI,OAAO,GAAG,QAAQ,CAAC,QAAQ,EAAE,CAAC,GAAG,CAAC,QAAQ,GAAG,IAAI,CAAC,OAAO,CAAC,CAAC;QAC/D,OAAO,CAAC,MAAM,CAAC;YACX,KAAK,EAAC,GAAG;SACZ,CAAC,CAAC;IAEP,CAAC;IAlED;QADC,QAAQ,CAAC,EAAE,CAAC,IAAI,CAAC;gDACQ;IAG1B;QADC,QAAQ,CAAC,EAAE,CAAC,IAAI,CAAC;6CACK;IAGvB;QADC,QAAQ,CAAC,EAAE,CAAC,IAAI,CAAC;+CACO;IAGzB;QADC,QAAQ,CAAC,EAAE,IAAI,EAAE,EAAE,CAAC,SAAS,EAAE,CAAC;kDACC;IAGlC;QADC,QAAQ,CAAC,EAAE,IAAI,EAAE,EAAE,CAAC,SAAS,EAAE,CAAC;2CACN;IAfV,QAAQ;QAD5B,OAAO;OACa,QAAQ,CAwE5B;IAAD,eAAC;CAxED,AAwEC,CAxEqC,EAAE,CAAC,SAAS,GAwEjD;kBAxEoB,QAAQ","file":"","sourceRoot":"../../../../assets/script","sourcesContent":["// Learn TypeScript:\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/typescript.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/manual/en/scripting/typescript.html\n// Learn Attribute:\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/manual/en/scripting/reference/attributes.html\n// Learn life-cycle callbacks:\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/manual/en/scripting/life-cycle-callbacks.html\n\nimport fa from \"../../build/web-desktop/src/assets/script/firebase\";\n\nconst {ccclass, property} = cc._decorator;\n\n@ccclass\nexport default class gameover extends cc.Component {\n\n    @property(cc.Node)\n    restartBtn:cc.Node = null;\n\n    @property(cc.Node)\n    exitBtn:cc.Node = null;\n\n    @property(cc.Node)\n    scoreNode:cc.Node = null;\n\n    @property({ type: cc.AudioClip })\n    bgm_gameover: cc.AudioClip = null;\n\n    @property({ type: cc.AudioClip })\n    click: cc.AudioClip = null;\n\n    private user_ID;\n\n\n    // LIFE-CYCLE CALLBACKS:\n\n    onLoad () {\n        cc.director.preloadScene(\"working\", function () {\n            cc.log(\"Next scene preloaded\");\n        });\n\n        this.restartBtn.on('click',()=>{\n            cc.audioEngine.stopAll();\n            cc.audioEngine.playEffect(this.click,false);\n            cc.log('restart');\n            cc.director.loadScene('userInfo');\n        });\n\n        this.exitBtn.on('click',()=>{\n            /*\n            cc.log('ecit');\n            cc.director.loadScene('userInfo');\n            \n            */\n           cc.audioEngine.stopAll();\n           cc.audioEngine.playEffect(this.click,false);\n           window.close();\n        });\n\n        var userEmail = firebase.auth().currentUser.email;\n        let split_name = userEmail.split('@');\n        this.user_ID = split_name[0];\n        cc.log(\"load user \",this.user_ID, \"data\");\n\n        var userRef = firebase.database().ref(\"/user/\" + this.user_ID);\n        userRef.on(\"value\", (snapshot)=>{\n            var score:number = snapshot.val().Score;\n            this.scoreNode.getComponent(cc.Label).string = String(score);\n        })\n        \n\n        \n\n    }\n\n    start () {\n        cc.audioEngine.playEffect(this.bgm_gameover,false);\n\n        var userRef = firebase.database().ref(\"/user/\" + this.user_ID);\n        userRef.update({\n            Score:'0'\n        });\n\n    }\n\n    // update (dt) {}\n}\n"]}