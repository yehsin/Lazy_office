{"version":3,"sources":["../../../../../assets/Pacman/Script/assets/Pacman/Script/ghost.ts"],"names":[],"mappings":";;;;AAAA,oBAAoB;AACpB,kFAAkF;AAClF,yFAAyF;AACzF,mBAAmB;AACnB,4FAA4F;AAC5F,mGAAmG;AACnG,8BAA8B;AAC9B,4FAA4F;AAC5F,mGAAmG;;AAE7F,IAAA,kBAAmC,EAAlC,oBAAO,EAAE,sBAAyB,CAAC;AAG1C;IAAsC,4BAAY;IADlD;QAAA,qEA+KC;QA3KW,YAAM,GAAY,IAAI,CAAC;QAGvB,aAAO,GAAY,IAAI,CAAC;QAIhC,6BAA6B;QACrB,eAAS,GAAW,CAAC,CAAC;QAEtB,iBAAW,GAAW,CAAC,CAAC;QAExB,iBAAW,GAAW,CAAC,CAAC;;IA+JpC,CAAC;IA7JG,yBAAM,GAAN;QACI,EAAE,CAAC,QAAQ,CAAC,mBAAmB,EAAE,CAAC,OAAO,GAAG,IAAI,CAAC;QACjD,EAAE,CAAC,QAAQ,CAAC,iBAAiB,EAAE,CAAC,OAAO,GAAG,IAAI,CAAC;IACnD,CAAC;IAED,wBAAK,GAAL;QACI,IAAI,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,MAAM,EAAE,GAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC;QAChD,IAAI,CAAC,IAAI,CAAC,EAAC;YACP,IAAI,CAAC,SAAS,GAAG,CAAC,CAAC;SACtB;aACG;YACA,IAAI,CAAC,SAAS,GAAG,CAAC,CAAC;SACtB;IACL,CAAC;IAGO,gCAAa,GAArB,UAAsB,EAAE;QACpB,IAAI,IAAI,CAAC,SAAS,IAAI,CAAC,EAAC;YACpB,IAAI,CAAC,WAAW,GAAG,CAAC,CAAC;YACrB,IAAI,CAAC,WAAW,GAAG,GAAG,CAAC;SAC1B;QACD,IAAI,IAAI,CAAC,SAAS,IAAI,CAAC,EAAC;YACpB,IAAI,CAAC,WAAW,GAAG,CAAC,CAAC;YACrB,IAAI,CAAC,WAAW,GAAG,CAAC,GAAG,CAAC;SAC3B;QACD,IAAI,IAAI,CAAC,SAAS,IAAI,CAAC,EAAC;YACpB,IAAI,CAAC,WAAW,GAAG,CAAC,GAAG,CAAC;YACxB,IAAI,CAAC,WAAW,GAAG,CAAC,CAAC;SACxB;QACD,IAAI,IAAI,CAAC,SAAS,IAAI,CAAC,EAAC;YACpB,IAAI,CAAC,WAAW,GAAG,GAAG,CAAC;YACvB,IAAI,CAAC,WAAW,GAAG,CAAC,CAAC;SACxB;QAED,IAAI,CAAC,IAAI,CAAC,CAAC,IAAI,IAAI,CAAC,WAAW,GAAG,EAAE,CAAC;QACrC,IAAI,CAAC,IAAI,CAAC,CAAC,IAAI,IAAI,CAAC,WAAW,GAAG,EAAE,CAAC;IACzC,CAAC;IAEO,iCAAc,GAAtB,UAAuB,EAAE;QACrB,IAAI,IAAI,CAAC,MAAM,CAAC,CAAC,GAAG,IAAI,CAAC,IAAI,CAAC,CAAC,EAAC;YAC5B,IAAI,CAAC,WAAW,GAAG,GAAG,CAAC;SAC1B;QACD,IAAI,IAAI,CAAC,MAAM,CAAC,CAAC,GAAG,IAAI,CAAC,IAAI,CAAC,CAAC,EAAC;YAC5B,IAAI,CAAC,WAAW,GAAG,CAAC,GAAG,CAAC;SAC3B;QACD,IAAI,IAAI,CAAC,MAAM,CAAC,CAAC,GAAG,IAAI,CAAC,IAAI,CAAC,CAAC,EAAC;YAC5B,IAAI,CAAC,WAAW,GAAG,GAAG,CAAC;SAC1B;QACD,IAAI,IAAI,CAAC,MAAM,CAAC,CAAC,GAAG,IAAI,CAAC,IAAI,CAAC,CAAC,EAAC;YAC5B,IAAI,CAAC,WAAW,GAAG,CAAC,GAAG,CAAC;SAC3B;QAED,IAAI,CAAC,IAAI,CAAC,CAAC,IAAI,IAAI,CAAC,WAAW,GAAC,EAAE,CAAC;QACnC,IAAI,CAAC,IAAI,CAAC,CAAC,IAAI,IAAI,CAAC,WAAW,GAAC,EAAE,CAAC;IACvC,CAAC;IAED,yBAAM,GAAN,UAAQ,EAAE;QACN,IAAI,CAAC,aAAa,CAAC,EAAE,CAAC,CAAC;QACvB,mDAAmD;QACnD,IAAI,IAAI,CAAC,MAAM,CAAC,YAAY,CAAC,QAAQ,CAAC,CAAC,IAAI,EAAE,EAAC;YAC1C,IAAI,CAAC,IAAI,CAAC,OAAO,EAAE,CAAC;SACvB;QAED,IAAI,IAAI,CAAC,OAAO,CAAC,YAAY,CAAC,SAAS,CAAC,CAAC,MAAM,EAAE,EAAC;YAC9C,IAAI,CAAC,IAAI,CAAC,OAAO,EAAE,CAAC;SACvB;QACD,wBAAwB;QACxB,sBAAsB;QACtB,sBAAsB;IAC1B,CAAC;IAED,mCAAgB,GAAhB,UAAiB,KAAK;QAClB,2BAA2B;QAC3B,mBAAmB;QAEnB,IAAI,IAAI,CAAC,WAAW,IAAI,CAAC,EAAC;YACtB,IAAI,KAAK,CAAC,IAAI,CAAC,KAAK,IAAI,YAAY,EAAC;gBACjC,IAAI,KAAK,CAAC,GAAG,IAAI,EAAE,EAAC;oBAChB,IAAI,CAAC,SAAS,GAAG,CAAC,CAAC;iBACtB;gBACD,IAAI,KAAK,CAAC,GAAG,IAAI,EAAE,EAAC;oBAChB,IAAI,CAAC,SAAS,GAAG,CAAC,CAAC;iBACtB;gBACD,IAAI,KAAK,CAAC,GAAG,IAAI,EAAE,EAAC;oBAChB,IAAI,CAAC,SAAS,GAAG,CAAC,CAAC;iBACtB;gBACD,IAAI,KAAK,CAAC,GAAG,IAAI,EAAE,EAAC;oBAChB,IAAI,CAAC,SAAS,GAAG,CAAC,CAAC;iBACtB;aACJ;YAED,IAAI,KAAK,CAAC,IAAI,CAAC,KAAK,IAAI,YAAY,EAAC;gBACjC,IAAI,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,MAAM,EAAE,GAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC;gBAChD,IAAI,CAAC,IAAI,CAAC;oBACN,IAAI,CAAC,SAAS,GAAG,CAAC,CAAC;;oBAEnB,IAAI,CAAC,SAAS,GAAG,CAAC,CAAC;aAC1B;YAED,IAAI,KAAK,CAAC,IAAI,CAAC,KAAK,IAAI,YAAY,EAAC;gBACjC,IAAI,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,MAAM,EAAE,GAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC;gBAChD,IAAI,KAAK,CAAC,GAAG,IAAI,CAAC,EAAC;oBACf,IAAI,CAAC,IAAI,CAAC;wBACN,IAAI,CAAC,SAAS,GAAG,CAAC,CAAC;iBAC1B;gBACD,IAAI,KAAK,CAAC,GAAG,IAAI,CAAC,EAAC;oBACf,IAAI,CAAC,IAAI,CAAC;wBACN,IAAI,CAAC,SAAS,GAAG,CAAC,CAAC;iBAC1B;aACJ;SACJ;QAED,IAAI,IAAI,CAAC,WAAW,IAAI,CAAC,EAAC;YACtB,IAAI,KAAK,CAAC,IAAI,CAAC,KAAK,IAAI,YAAY,EAAC;gBACjC,IAAI,KAAK,CAAC,GAAG,IAAI,EAAE,EAAC;oBAChB,IAAI,CAAC,SAAS,GAAG,CAAC,CAAC;iBACtB;gBACD,IAAI,KAAK,CAAC,GAAG,IAAI,EAAE,EAAC;oBAChB,IAAI,CAAC,SAAS,GAAG,CAAC,CAAC;iBACtB;gBACD,IAAI,KAAK,CAAC,GAAG,IAAI,EAAE,EAAC;oBAChB,IAAI,CAAC,SAAS,GAAG,CAAC,CAAC;iBACtB;gBACD,IAAI,KAAK,CAAC,GAAG,IAAI,EAAE,EAAC;oBAChB,IAAI,CAAC,SAAS,GAAG,CAAC,CAAC;iBACtB;aACJ;YAED,IAAI,KAAK,CAAC,IAAI,CAAC,KAAK,IAAI,YAAY,EAAC;gBACjC,IAAI,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,MAAM,EAAE,GAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC;gBAChD,IAAI,KAAK,CAAC,GAAG,IAAI,CAAC,EAAC;oBACf,IAAI,CAAC,IAAI,CAAC;wBACN,IAAI,CAAC,SAAS,GAAG,CAAC,CAAC;iBAC1B;gBACD,IAAI,KAAK,CAAC,GAAG,IAAI,CAAC,EAAC;oBACf,IAAI,CAAC,IAAI,CAAC;wBACN,IAAI,CAAC,SAAS,GAAG,CAAC,CAAC;iBAC1B;aACJ;YAED,IAAI,KAAK,CAAC,IAAI,CAAC,KAAK,IAAI,YAAY,EAAC;gBACjC,IAAI,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,MAAM,EAAE,GAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC;gBAChD,IAAI,CAAC,IAAI,CAAC;oBACN,IAAI,CAAC,SAAS,GAAG,CAAC,CAAC;;oBAEnB,IAAI,CAAC,SAAS,GAAG,CAAC,CAAC;aAC1B;SACJ;IAEL,CAAC;IAED,iCAAc,GAAd,UAAe,OAAO,EAAE,IAAI,EAAE,KAAK;QAC/B,yBAAyB;QACzB,IAAI,KAAK,CAAC,IAAI,CAAC,IAAI,IAAI,QAAQ,EAAC;YAC5B,IAAI,CAAC,IAAI,CAAC,OAAO,EAAE,CAAC;SACvB;IACL,CAAC;IA1KD;QADC,QAAQ,CAAC,EAAE,CAAC,IAAI,CAAC;4CACa;IAG/B;QADC,QAAQ,CAAC,EAAE,CAAC,IAAI,CAAC;6CACc;IANf,QAAQ;QAD5B,OAAO;OACa,QAAQ,CA8K5B;IAAD,eAAC;CA9KD,AA8KC,CA9KqC,EAAE,CAAC,SAAS,GA8KjD;kBA9KoB,QAAQ","file":"","sourceRoot":"../../../../../assets/Pacman/Script","sourcesContent":["// Learn TypeScript:\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/typescript.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/manual/en/scripting/typescript.html\n// Learn Attribute:\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/manual/en/scripting/reference/attributes.html\n// Learn life-cycle callbacks:\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/manual/en/scripting/life-cycle-callbacks.html\n\nconst {ccclass, property} = cc._decorator;\n\n@ccclass\nexport default class NewClass extends cc.Component {\n\n    @property(cc.Node)\n    private player: cc.Node = null;\n\n    @property(cc.Node)\n    private gameMgr: cc.Node = null;\n\n    \n\n    // 1 up 2 down 3 left 4 right\n    private direction: number = 4;\n\n    private ghostSpeedX: number = 0;\n\n    private ghostSpeedY: number = 0;\n\n    onLoad() {\n        cc.director.getCollisionManager().enabled = true;\n        cc.director.getPhysicsManager().enabled = true;\n    }\n\n    start () {\n        var n = Math.floor(Math.random()*Math.floor(2));\n        if (n == 0){\n            this.direction = 3;\n        }\n        else{\n            this.direction = 4;\n        }\n    }\n\n    \n    private ghostMovement(dt){\n        if (this.direction == 1){\n            this.ghostSpeedX = 0;\n            this.ghostSpeedY = 100;\n        }\n        if (this.direction == 2){\n            this.ghostSpeedX = 0;\n            this.ghostSpeedY = -100;\n        }\n        if (this.direction == 3){\n            this.ghostSpeedX = -100;\n            this.ghostSpeedY = 0;\n        }\n        if (this.direction == 4){\n            this.ghostSpeedX = 100;\n            this.ghostSpeedY = 0;\n        }\n\n        this.node.x += this.ghostSpeedX * dt;\n        this.node.y += this.ghostSpeedY * dt;\n    }\n\n    private ghostMovement2(dt){\n        if (this.player.x > this.node.x){\n            this.ghostSpeedX = 100;\n        }\n        if (this.player.x < this.node.x){\n            this.ghostSpeedX = -100;\n        }\n        if (this.player.y > this.node.y){\n            this.ghostSpeedY = 100;\n        }\n        if (this.player.y < this.node.y){\n            this.ghostSpeedY = -100;\n        }\n\n        this.node.x += this.ghostSpeedX*dt;\n        this.node.y += this.ghostSpeedY*dt;\n    }\n\n    update (dt) {\n        this.ghostMovement(dt);\n        //cc.log(this.player.getComponent(\"pacman\").Dead())\n        if (this.player.getComponent(\"pacman\").Dead()){\n            this.node.destroy();\n        }\n\n        if (this.gameMgr.getComponent(\"gameMgr\").notime()){\n            this.node.destroy();\n        }\n        //this.node.x += 100*dt;\n        //cc.log(this.node.x);\n        //cc.log(this.node.y);\n    }\n\n    onCollisionEnter(other){\n        //cc.log(other.node.group);\n        //cc.log(other.tag)\n\n        if (this.ghostSpeedY == 0){\n            if (other.node.group == \"situation1\"){\n                if (other.tag == 13){\n                    this.direction = 1;\n                }\n                if (other.tag == 14){\n                    this.direction = 1;\n                }\n                if (other.tag == 23){\n                    this.direction = 2;\n                }\n                if (other.tag == 24){\n                    this.direction = 2;\n                }\n            }\n\n            if (other.node.group == \"situation2\"){\n                var n = Math.floor(Math.random()*Math.floor(2));\n                if (n == 0)\n                    this.direction = 1;\n                else\n                    this.direction = 2;\n            }\n\n            if (other.node.group == \"situation3\"){\n                var n = Math.floor(Math.random()*Math.floor(2));\n                if (other.tag == 1){\n                    if (n == 0)\n                        this.direction = 1;\n                }\n                if (other.tag == 2){\n                    if (n == 0)\n                        this.direction = 2;\n                }\n            }\n        }\n\n        if (this.ghostSpeedX == 0){\n            if (other.node.group == \"situation1\"){\n                if (other.tag == 13){\n                    this.direction = 3;\n                }\n                if (other.tag == 14){\n                    this.direction = 4;\n                }\n                if (other.tag == 23){\n                    this.direction = 3;\n                }\n                if (other.tag == 24){\n                    this.direction = 4;\n                }\n            }\n\n            if (other.node.group == \"situation2\"){\n                var n = Math.floor(Math.random()*Math.floor(2));\n                if (other.tag == 3){\n                    if (n == 0)\n                        this.direction = 3;\n                }\n                if (other.tag == 4){\n                    if (n == 0)\n                        this.direction = 4;\n                }\n            }\n\n            if (other.node.group == \"situation3\"){\n                var n = Math.floor(Math.random()*Math.floor(2));\n                if (n == 0)\n                    this.direction = 3;\n                else\n                    this.direction = 4;\n            }\n        }\n\n    }\n\n    onBeginContact(contact, self, other){\n        //cc.log(other.node.name)\n        if (other.node.name == \"Pacman\"){\n            self.node.destroy();\n        }\n    }\n}\n"]}