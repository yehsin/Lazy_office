{"version":3,"sources":["../../../../../assets/script/dino_script/assets/script/dino_script/dinosour.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"../../../../../assets/script/dino_script","sourcesContent":["// Learn TypeScript:\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/typescript.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/manual/en/scripting/typescript.html\n// Learn Attribute:\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/manual/en/scripting/reference/attributes.html\n// Learn life-cycle callbacks:\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/manual/en/scripting/life-cycle-callbacks.html\n\nconst {ccclass, property} = cc._decorator;\n\n@ccclass\nexport default class NewClass extends cc.Component {\n\n    @property({type:cc.AudioClip})\n    bgm : cc.AudioClip = null;\n    // LIFE-CYCLE CALLBACKS:\n    private kDown: boolean = false;\n\n    private cDown: boolean = false;\n\n    private onGround: boolean = false;\n\n    private anim = null;\n\n    private animateState = null;\n\n    private dinoskin: boolean = false; \n\n    private dinoLife: boolean = true;\n\n    changrDinoSkin(isAdvance:boolean){\n        cc.log(\"set dino:\",isAdvance);\n        this.dinoskin = isAdvance;\n    }\n\n    onLoad () {\n        cc.director.getPhysicsManager().enabled = true;\u000b        \t\n        cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN, this.onKeyDown, this);\n        cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP, this.onKeyUp, this);\n        this.anim = this.getComponent(cc.Animation);\n    }\n\n    onKeyDown(event) {\n        //cc.log(\"Key Down: \" + event.keyCode);\n        if(event.keyCode == cc.macro.KEY.k) {\n            this.kDown = true;\n        }\n        //cc.log(\"Cey Down: \" + event.keyCode);\n    }\n\n    onKeyUp(event) {\n        if(event.keyCode == cc.macro.KEY.k){\n            this.kDown = false;\n        }\n    }\n\n    private playerMovement(dt) {\n        if(!this.dinoskin){\n            if(this.kDown && this.onGround){\n                this.jump();\n                this.anim.play('dinosour_jump');\n            }\n        }\n        else{\n            if(this.kDown && this.onGround){\n                this.jump();\n                this.anim.play('dinosour_sp_jump');\n            }\n        }\n        //if(this.kDown && this.onGround){\n        //    this.jump();\n        //    this.anim.play('dinosour_jump');\n        //}\n    }    \n\n    private jump() {\n        this.onGround = false;\n\n        // Method I: Apply Force to rigidbody\n        this.getComponent(cc.RigidBody).applyForceToCenter(new cc.Vec2(0, 130000), true);\n\n        // Method II: Change velocity of rigidbody\n        // this.getComponent(cc.RigidBody).linearVelocity = cc.v2(0, 1500);\n    }\n\n    private playerAnimation(){\n        //if(this.onGround == false){\n            //this.anim.play(\"dinosour_jump\");\n            //this.anim.stop(\"dinosour\");\n        //}\n        //else{\n            //this.anim.stop(\"dinosour_jump\");\n            //this.anim.play(\"dinosour\");\n            //this.animateState = this.anim.play('dinosour');\n        //}\n    }\n\n\n    start () {\n        cc.audioEngine.stopMusic();\n        cc.audioEngine.playEffect(this.bgm,false);\n        cc.director.preloadScene(\"working\", function () {\n            cc.log(\"Next scene preloaded\");\n        });\n    }\n\n    update (dt) {\n        this.playerMovement(dt);\n        this.playerAnimation();\n        if(this.dinoLife == false){\n            cc.audioEngine.stopAll();\n        }\n    }\n    onBeginContact(contact, self, other) {\n        if(other.node.name == \"bound\") {\n            //cc.log(\"hits the ground\");\n            this.onGround = true;\n            if(!this.dinoskin){\n                this.anim.play('dinosour');\n                this.anim.stop('dinosour_jump');\n            }\n            else if(this.dinoskin){\n                this.anim.play('dinosour_sp');\n                this.anim.stop('dinosour_sp_jump');\n            }\n            //this.anim.play('dinosour');\n            //this.anim.stop('dinosour_jump');\n        }\n        else if(other.node.name == \"catus\" || other.node.name == \"catus2\"){\n            this.dinoLife = false;\n            //cc.director.loadScene(\"working\");\n            cc.audioEngine.stopAllEffects();\n        }\n        else if(other.node.name == \"bird\"){\n            this.dinoLife = false;\n            //cc.director.loadScene(\"working\");\n            cc.audioEngine.stopAllEffects();\n        }\n    }\n}\n"]}