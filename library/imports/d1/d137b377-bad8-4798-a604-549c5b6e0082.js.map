{"version":3,"sources":["../../../../assets/script/assets/script/maingame_mgr.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"../../../../assets/script","sourcesContent":["const { ccclass, property } = cc._decorator;\n\n@ccclass\nexport default class maingame_mgr extends cc.Component {\n\n  @property(cc.Node)\n  boss:cc.Node = null;\n\n\n  @property(cc.Node)\n  basicofficeNode : cc.Node = null;\n\n  @property(cc.Node)\n  advanceofficeNode : cc.Node = null;\n\n  @property({ type: cc.AudioClip })\n  click_playgame_sound: cc.AudioClip = null;\n\n  @property({ type: cc.AudioClip })\n  click_bottle_sound: cc.AudioClip = null;\n\n  @property({ type: cc.AudioClip })\n  click_radio_sound: cc.AudioClip = null;\n\n  @property({ type: cc.AudioClip })\n  click_restart_sound: cc.AudioClip = null;\n\n  @property({ type: cc.AudioClip })\n  bgm_success: cc.AudioClip = null;\n\n  @property({ type: cc.AudioClip })\n  bgm_music: cc.AudioClip = null;\n\n  @property({ type: cc.AudioClip })\n  bgm_amb: cc.AudioClip = null;\n\n  //@property(cc.Node)\n  //radioBtn : cc.Node = null;\n\n  @property(cc.Node)\n  playBtn : cc.Node = null;\n\n  //@property(cc.Node)\n  //bottleBtn : cc.Node = null;\n\n  @property(cc.Node)\n  restartBtn : cc.Node = null;\n\n  @property(cc.Node)\n  exitBtn : cc.Node = null;\n\n  @property(cc.Node)\n  resultText : cc.Node = null;\n\n  private bgm_state: string = \"music\";\n\n  @property(cc.Node)\n  timeNode: cc.Node = null;\n\n  @property(cc.Node)\n  scoreNode: cc.Node = null;\n\n  @property(cc.Node)\n  finalscoreNode: cc.Node = null;\n\n  @property(cc.Node)\n  resultNode: cc.Node = null;\n\n  private score: number;\n\n  private totalScore:number;\n\n  private gameTime: number = -1; // remaining time\n\n  private isTimeover: boolean = false; // time out or not\n\n  private isFinish: boolean = false; \n\n  private textContent:string = \"CONGRADULATION\";\n\n  private user_ID:string = '789';//TODO:delete this only for debug\n\n  private playerStatus:string = 'nothing';\n\n  private Hscore;\n\n  private officeLevel:string = \"BASIC\";\n\n  private isDead:boolean = false;\n\n  private CdTimePac:number = 0;\n  private CdTimeDino:number = 0;\n  private nextStatus:string = \"\";\n\n  stateChange(playing:boolean,working:boolean){\n    \n    if(playing==false&&working==false){\n      this.playerStatus = 'nothing';\n    }\n    else if(playing==true){\n      this.playerStatus = 'playing'\n    }\n    else if(working==true){\n      this.playerStatus = 'working'\n    }\n    cc.log(this.playerStatus);\n  }\n\n  restart(){\n    cc.audioEngine.playEffect(this.click_restart_sound,false);\n    cc.log(\"restart\");\n    //this.start_step();\n    cc.director.loadScene(\"userInfo\");\n  }\n\n  exit(){\n    cc.audioEngine.playEffect(this.click_restart_sound,false);\n    //cc.log(\"exit\");\n    //cc.director.loadScene(\"userInfo\");\n    window.close();\n  }\n\n  private finishgame(){// SUCCESS!\n\n    cc.audioEngine.pauseAll();\n\n    //cc.audioEngine.playMusic(this.bgm_success,false); //TODO: cannot play \n\n    cc.log(\"SUCCESS!\");\n\n    this.score = this.score + 300;\n    this.boss.getComponent('boss').finish();\n    //this.score = 600; //TODO:for debug\n\n    this.totalScore = this.totalScore + this.score;\n\n    this.finalscoreNode.getComponent(cc.Label).string = String(this.score);\n    this.resultNode.opacity = 255;\n    this.restartBtn.getComponent(cc.Button).interactable = true;\n    this.exitBtn.getComponent(cc.Button).interactable = true;\n\n    \n\n    if(this.score > this.Hscore){ //new record\n\n      this.textContent = \"NEW RECORD\";\n      \n\n    }\n    else{\n      if(this.score < 500){\n        this.textContent = \"SUCCESS\";\n\n      }\n      else if( this.score >=500 && this.score < 1000){\n        this.textContent = \"NICE JOB\";\n      }\n      else{\n        this.textContent = \"EXCELLENT!\";\n      }\n\n    }\n\n    \n\n    this.resultText.getComponent(cc.Label).string = this.textContent;\n\n    this.isFinish = true;\n    //this.radioBtn.getComponent(cc.Button).interactable = false;\n    this.playBtn.getComponent(cc.Button).interactable = false;\n    //this.bottleBtn.getComponent(cc.Button).interactable = false;\n\n    if(this.officeLevel == \"BASIC\"){\n      this.basicofficeNode.getChildByName('radio').getComponent(cc.Button).interactable = false;\n      this.basicofficeNode.getChildByName('coffee').getComponent(cc.Button).interactable = false;\n\n    \n    }\n    else {\n      \n      this.advanceofficeNode.getChildByName('radio').getComponent(cc.Button).interactable = false;\n      this.advanceofficeNode.getChildByName('coffee').getComponent(cc.Button).interactable = false;\n  \n      \n      \n    }\n    \n\n    cc.audioEngine.pauseAll();\n\n\n\n    this.writeUserData();\n\n    \n    \n\n  }\n\n  radio_change(){ // bgm status change\n\n    if(this.bgm_state == \"music\"){\n      cc.audioEngine.pauseMusic();\n      //cc.audioEngine.playMusic(this.bgm_amb,true);\n      this.bgm_state = \"amb\";\n    }\n    else{\n      cc.audioEngine.pauseMusic();\n      //cc.audioEngine.playMusic(this.bgm_music,true);\n      this.bgm_state = \"music\"\n    }\n\n  }\n\n\n  private Timer() {\n    if(this.gameTime == -1) this.gameTime = 10;\n    cc.log(\"start timer:\",this.gameTime);\n\n    this.schedule(function () {\n      this.gameTime -= 1;\n      if(this.CdTimeDino>0){\n        this.CdTimeDino -=1;\n      }\n      if(this.CdTimePac>0){\n        this.CdTimePac -=1;\n      }\n      //cc.log(this.gameTime);\n      if (this.gameTime <= 0 && this.isTimeover == false) {\n        this.isTimeover = true;\n        this.finishgame();\n        this.gameTime = 0;\n        // jump to another scene or show result directly\n      }\n      \n      if(this.gameTime<0) this.gameTime = 0;\n      if(this.gameTime>0){\n        if(this.playerStatus == 'playing') this.score +=2;\n        else if(this.playerStatus=='working') this.score -=1;\n      }\n      this.scoreNode.getComponent(cc.Label).string = String(this.score);\n\n      this.timeNode.getComponent(cc.Label).string = String(this.gameTime);\n    }, 1);\n  }\n\n  private loadUserData() {\n    cc.log(\"start connecting with firebase\");\n    var userEmail = firebase.auth().currentUser.email;\n    let split_name = userEmail.split('@');\n    this.user_ID = split_name[0];\n    //this.user_ID = firebase.auth().currentUser.uid;\n\n    var scene = cc.director.getScene().name;\n\n    cc.log(\"read user\" , this.user_ID , \" data\");\n    \n\n    var scorenode = this.scoreNode;\n\n    var ScoreNum = 0;\n\n    var userRef = firebase.database().ref(\"/user/\" + this.user_ID);\n    userRef.once(\"value\", (snapshot) => {\n      cc.log(\n        'total score:',snapshot.val().totalScore,\n        //'\\nscore',snapshot.val().Score, //score\n        '\\nminigamescore',snapshot.val().minigameScore,\n        '\\nstatus',snapshot.val().status,\n        '\\ntime',snapshot.val().time,\n        '\\noffice',snapshot.val().office\n      );\n\n      this.officeLevel = snapshot.val().office;\n\n\n      if(snapshot.val().status == \"start\"){ // NEW GAME\n        cc.log(\"new game\");\n        this.gameTime = 120;\n        this.score = 0;\n        ScoreNum = 0;\n\n\n      } \n      else if(snapshot.val().status == \"endgame_dino\"){\n        cc.log(\"end of mini game dino\");\n        cc.director.resume();// TODO: may be harmful\n       this.gameTime = Number(snapshot.val().time);\n       var score_main : number = +snapshot.val().Score;\n       var score_mini : number = +snapshot.val().minigameScore;\n       ScoreNum = score_main + score_mini;\n       this.score = ScoreNum;\n       //this.CdTimeDino = 10;\n       userRef.update({status:'start'});\n\n     \n\n      } \n      else if(snapshot.val().status == \"endgame_pac\"){\n        cc.log(\"end of mini game pac\");\n        cc.director.resume();// TODO: may be harmful\n       this.gameTime = Number(snapshot.val().time);\n       var score_main : number = +snapshot.val().Score;\n       var score_mini : number = +snapshot.val().minigameScore;\n       ScoreNum = score_main + score_mini;\n       this.score = ScoreNum;\n       this.CdTimePac = 30;\n       userRef.update({status:'start'});\n     \n\n      } \n      this.setting();\n\n      scorenode.getComponent(cc.Label).string = ScoreNum.toString();\n\n      this.Hscore = snapshot.val().HScore; //load highest score\n      this.totalScore = snapshot.val().totalScore; //load total score until now\n      this.officeLevel =  snapshot.val().office; //load office\n      cc.log(\"remaining time:\",this.gameTime);\n      cc.log(\"score:\",this.score);\n      cc.log(\"HScore:\", this.Hscore);\n\n      \n    });\n  }\n  updateScore(addScore:number){\n    this.score = this.score +addScore;\n    this.scoreNode.getComponent(cc.Label).string = this.score.toString();\n\n  }\n\n  private writeUserData(){\n\n    var animState = this.boss.getComponent('boss').getAnimState();\n    cc.log(animState);\n\n    var userRef = firebase.database().ref(\"/user/\" + this.user_ID);\n\n    userRef.once(\"value\", (snapshot) => {\n\n      this.Hscore = snapshot.val().HScore;\n      \n    });\n\n    if(this.isFinish == false) //\n    {\n\n      var updateInfo_1 = {\n        'minigameScore':0,\n        'Score':this.score,\n        'status':this.nextStatus,\n        'time':this.gameTime,\n        'bossState':animState\n      };\n\n      userRef.update(updateInfo_1);\n\n    }\n    else if(this.isDead==true){\n      if(this.totalScore >= 1000 && this.officeLevel == 'BASIC'){\n        this.officeLevel = \"ADVANCE\";\n\n      }\n      else if(this.totalScore < 1000 && this.officeLevel == \"ADVANCE\"){\n        this.officeLevel = 'BASIC';\n\n      }\n\n      if(this.score > this.Hscore){ //new record\n        cc.log('new record:',this.score,this.Hscore);\n        var updateInfo_4 = {\n          office:this.officeLevel,\n          totalScore:this.totalScore,\n          HScore: this.score,\n          Score: this.score,\n          status: 'start',\n          time: '120',\n          bossState:'sleep'\n\n        };\n        userRef.update(updateInfo_4);\n\n      }\n      else{\n        var updateInfo_5 = {\n          office:this.officeLevel,\n          totalScore:this.totalScore,\n          Score: this.score,\n          status: \"start\",\n          time: \"120\",\n          bossState:'sleep'\n        };\n        userRef.update(updateInfo_5);\n\n      }\n\n    }\n    else if(this.isFinish==true && this.isDead==false){\n\n      if(this.totalScore > 1000 && this.officeLevel == 'BASIC'){\n        this.officeLevel = \"ADVANCE\";\n      }\n      if(this.score > this.Hscore){ //new record\n        cc.log('new record:',this.score,this.Hscore);\n        var updateInfo_2 = {\n          office:this.officeLevel,\n          totalScore:this.totalScore,\n          HScore: this.score,\n          Score: '0',\n          status: 'start',\n          time: '120',\n          bossState:'sleep'\n        };\n        userRef.update(updateInfo_2);\n\n      }\n      else{\n        var updateInfo_3 = {\n          office:this.officeLevel,\n          totalScore:this.totalScore,\n          Score: \"0\",\n          status: \"start\",\n          time: \"120\",\n          bossState:'sleep'\n        };\n        userRef.update(updateInfo_3);\n\n      }\n      \n\n\n    }\n\n\n  }\n\n  ToDinosaur(){ // play game at work by btn\n    //this.playerStatus = \"playGame\";\n    cc.audioEngine.playEffect(this.click_playgame_sound, false);\n    this.nextStatus = \"endgame_dino\";\n    this.writeUserData(); //TODO:firebase bug\n   //cc.audioEngine.pauseAll();\n    cc.log(\"jump to Dino\");\n    cc.director.loadScene('dino_game');\n    \n  }\n\n  ToPacman(){ // go to toilet by btn\n    //this.playerStatus = \"goToilet\";\n    cc.audioEngine.playEffect(this.click_bottle_sound, false);\n    this.nextStatus = \"endgame_pac\";\n    this.writeUserData(); //TODO:firebase bug\n    cc.audioEngine.pauseAll();\n    cc.log(\"jump to pacman\");\n    cc.director.loadScene('Pacman');\n\n  }\n\n  \n  onLoad() {\n  \n    //this.loadUserData();//TODO:firebase bug \n    //office setting\n    cc.log(\"initial load:working\",this.enabled);\n    this.loadUserData();\n    //this.officeLevel = \"BASIC\";\n    this.start_step();\n    \n    \n  }\n  \n  GameOver(){\n    //cc.audioEngine.pauseAll();\n    //cc.audioEngine.playMusic(this.bgm_success,true); //TODO: cannot play \n\n    cc.log(\"GameOver at main scene\");\n\n    this.score = this.score - 200;\n\n    //this.score = 600; //TODO:for debug\n\n    this.totalScore = this.totalScore + this.score;\n\n    //this.finalscoreNode.getComponent(cc.Label).string = String(this.score);\n    //this.resultNode.opacity = 255;\n    //this.restartBtn.getComponent(cc.Button).interactable = true;\n    //this.exitBtn.getComponent(cc.Button).interactable = true;\n\n    this.isFinish = true;\n    //this.radioBtn.getComponent(cc.Button).interactable = false;\n    this.playBtn.getComponent(cc.Button).interactable = false;\n    //this.bottleBtn.getComponent(cc.Button).interactable = false;\n\n    if(this.officeLevel == \"BASIC\"){\n      this.basicofficeNode.getChildByName('radio').getComponent(cc.Button).interactable = false;\n      this.basicofficeNode.getChildByName('coffee').getComponent(cc.Button).interactable = false;\n\n    \n    }\n    else {\n      \n      this.advanceofficeNode.getChildByName('radio').getComponent(cc.Button).interactable = false;\n      this.advanceofficeNode.getChildByName('coffee').getComponent(cc.Button).interactable = false;\n  \n      \n      \n    }\n    \n\n    cc.audioEngine.pauseAll();\n\n    this.isDead = true;\n\n    this.writeUserData();\n\n    cc.director.loadScene(\"GameOver\");\n    \n\n  }\n\n  \n\n  private start_step(){\n\n    this.isFinish = false;\n    this.isTimeover = false;\n    this.resultNode.opacity = 0;\n\n    //this.radioBtn.getComponent(cc.Button).interactable = true;\n    //this.playBtn.getComponent(cc.Button).interactable = true;\n    //this.bottleBtn.getComponent(cc.Button).interactable = true;\n\n    this.restartBtn.getComponent(cc.Button).interactable = false;\n    this.exitBtn.getComponent(cc.Button).interactable = false;\n\n    /*\n    if(this.bgm_state == \"music\"){\n      //cc.audioEngine.playMusic(this.bgm_music,true);\n    }\n    else{\n      //cc.audioEngine.playMusic(this.bgm_amb,true);\n    }\n    */\n\n    //this.Timer();\n    \n  }\n\n  start() {\n    \n    \n    cc.log(\"Start Game!\");\n    cc.audioEngine.pauseAll();\n    //this.loadUserData();\n    //this.start_step();\n    //this.setting();\n    \n    this.Timer();\n    \n\n  }\n\n  setting(){\n    if(this.officeLevel == 'BASIC'){\n      cc.log(\"basic office setting...\");\n      this.basicofficeNode.opacity = 255;\n      this.advanceofficeNode.opacity = 0;\n      this.advanceofficeNode.getChildByName('radio').getComponent(cc.Button).interactable = false;\n      this.advanceofficeNode.getChildByName('coffee').getComponent(cc.Button).interactable = false;\n      this.basicofficeNode.getChildByName('radio').getComponent(cc.Button).interactable = true;\n      this.basicofficeNode.getChildByName('coffee').getComponent(cc.Button).interactable = true;\n      cc.log('basic coffee:',this.basicofficeNode.getChildByName('coffee').getComponent(cc.Button).interactable);\n    }\n    else{\n      cc.log(\"advance office setting...\");\n      this.basicofficeNode.opacity = 0;\n      this.advanceofficeNode.opacity = 255;\n      this.basicofficeNode.getChildByName('radio').getComponent(cc.Button).interactable = false;\n      this.basicofficeNode.getChildByName('coffee').getComponent(cc.Button).interactable = false;\n      this.advanceofficeNode.getChildByName('radio').getComponent(cc.Button).interactable = true;\n      this.advanceofficeNode.getChildByName('coffee').getComponent(cc.Button).interactable = true;\n\n\n\n    }\n  }\n\n  update (dt) {\n    ///* TODO:time\n    if(this.gameTime < 33){ // time < 33 -> cannot go to toilet\n      this.basicofficeNode.getChildByName('coffee').getComponent(cc.Button).interactable = false;\n      this.advanceofficeNode.getChildByName('coffee').getComponent(cc.Button).interactable = false;\n    }\n    else{\n      if(this.officeLevel==\"BASIC\"){\n        this.basicofficeNode.getChildByName('coffee').getComponent(cc.Button).interactable = true;\n\n      }\n      else{\n        this.advanceofficeNode.getChildByName('coffee').getComponent(cc.Button).interactable = true;\n\n      }\n    }\n    /*\n    if(this.CdTimeDino>0){\n      cc.log('DINO:',this.CdTimeDino);\n\n      this.playBtn.getComponent(cc.Button).interactable = false;\n\n    }\n    else{\n      this.playBtn.getComponent(cc.Button).interactable = true;\n\n\n    }\n    */\n    if(this.CdTimePac>0){\n      cc.log('PAC:',this.CdTimePac);\n      this.basicofficeNode.getChildByName('coffee').getComponent(cc.Button).interactable = false;\n      this.advanceofficeNode.getChildByName('coffee').getComponent(cc.Button).interactable = false;\n\n\n    }\n    else if(this.CdTimePac<=0 &&this.gameTime>=33 ){\n      if(this.officeLevel=='BASIC') this.basicofficeNode.getChildByName('coffee').getComponent(cc.Button).interactable = true;\n      else if(this.officeLevel=='ADVANCE') this.advanceofficeNode.getChildByName('coffee').getComponent(cc.Button).interactable = true;\n\n      \n    }\n    //*/\n  }\n}\n"]}