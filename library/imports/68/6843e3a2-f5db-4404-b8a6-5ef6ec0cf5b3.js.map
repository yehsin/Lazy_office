{"version":3,"sources":["../../../../assets/script/assets/script/QTE.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"../../../../assets/script","sourcesContent":["// Learn TypeScript:\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/typescript.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/manual/en/scripting/typescript.html\n// Learn Attribute:\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/manual/en/scripting/reference/attributes.html\n// Learn life-cycle callbacks:\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/manual/en/scripting/life-cycle-callbacks.html\n\nconst {ccclass, property} = cc._decorator;\n\n@ccclass\nexport default class NewClass extends cc.Component {\n\n    @property(cc.Node)\n    needle: cc.Node = null;\n\n    @property([cc.Node])\n    QTE : cc.Node[] = [];\n\n    @property(cc.Node)\n    time : cc.Node = null;\n    \n    @property(cc.Node)\n    dino : cc.Node = null;\n\n    @property({type:cc.AudioClip})\n    QTE_clip: cc.AudioClip = null;\n\n    @property(cc.Node)\n    gameMan : cc.Node = null;\n\n    @property(cc.Node)\n    boss: cc.Node = null;\n\n    @property(cc.Node)\n    boss_man:cc.Node = null;\n\n\n    private tragger = false;\n\n    private current_QTE = null;\n\n    private Begin = 0;\n\n    private random_x: number;\n\n    private random_y: number;\n\n    private Time : number;\n\n    private QTEing : boolean = false;\n\n    private NoMoreQTE :boolean = false;\n\n    private user_ID;\n\n    private QTE_count : boolean =false;\n\n    private anim;\n\n    private bossState = 'sleep';\n\n    //private score:number = 0;\n    // LIFE-CYCLE CALLBACKS:\n\n    changeQTEingState(){\n        this.QTEing = false;\n    }\n\n    private loadUsrdata(){\n        var userEmail = firebase.auth().currentUser.email;\n        let split_name = userEmail.split('@');\n        this.user_ID = split_name[0];\n    }\n\n\n    onLoad () {\n        cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN, this.onKeyDown, this);\n        cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP, this.onKeyUp, this);\n        this.loadUsrdata();\n        //this.anim = this.boss.getComponent(cc.Animation);\n        //this.anim.play();\n    }\n\n    onKeyDown(event){\n        if(event.keyCode == cc.macro.KEY.space){\n            this.tragger = true;\n            //cc.log('space');\n        }\n    }\n\n    onKeyUp(event){\n        if(event.keyCode == cc.macro.KEY.space){\n            this.tragger = false;\n        }\n    }\n\n   private needle_turnAround(){\n        \n            this.Begin = Date.now();\n            let action = cc.rotateBy(4,360);\n            this.needle.runAction(action);\n            cc.log('why?');\n            window.setTimeout(()=>{\n                if(this.QTEing){\n                    this.QTEend();\n                    this.boss_man.getComponent('boss').setAnimState('angry');\n                    this.bossState = 'angry';\n                    cc.log('timeout~');\n\n                    /*\n                    var userRef = firebase.database().ref(\"/user/\" + this.user_ID); //改變boss 為 angry\n                    userRef.update({\n                        'bossState': 'angry'\n                    })\n                    */\n\n                }\n                \n                cc.log('disappear');\n            },4500);\n            \n\n    }\n\n    private traggQTE(){\n        if(this.tragger){\n            let end = Date.now();\n            cc.log(this.Begin);\n            cc.log(end);\n            let angel = this.needle.rotation%360;\n            cc.log(\"angel:\",angel);\n            let during = (end - this.Begin)/1000;\n            cc.log(during);\n            if(this.current_QTE == 0){\n                \n\n                if(angel < 30 || during > 105) {\n                    //this.dino.getComponent('dinosour').dinoLife = false;\n                   // cc.director.pause();\n                    this.NoMoreQTE = true;\n                    //this.gameMan.getComponent('lazy_game_gameMan').score  = -300;\n                    this.QTEend();\n                    this.boss_man.getComponent('boss').setAnimState('angry');\n                    this.bossState = 'angry';\n                    cc.log('fail0');\n                }\n                else {\n                    this.QTEing = false;\n                    if(angel > 77 && angel < 86){\n                        this.boss_man.getComponent('boss').setAnimState('back');\n                        this.NoMoreQTE = true;\n                        this.gameMan.getComponent('lazy_game_gameMan').score += 400;\n                        this.QTEend();\n                        cc.log('success QTE');\n\n                        this.gameMan.getComponent('lazy_game_gameMan').successGame();\n                        //cc.director.loadScene('working');\n                        \n                        \n                    }\n                    else {\n                        this.boss_man.getComponent('boss').setAnimState('back');\n                        this.NoMoreQTE = true;\n                        this.gameMan.getComponent('lazy_game_gameMan').score += 200;\n                        this.QTEend();\n                        cc.log('success QTE');\n\n                        this.gameMan.getComponent('lazy_game_gameMan').successGame();\n                        \n                    }\n                    //77 86\n                    //cc.log('0');\n                    //cc.log('yes');\n                    //cc.director.pause();\n                }\n                \n            } //偵測旋轉角度與時間點穩不穩合\n            else if(this.current_QTE == 1){\n                //let during = (end - this.Begin)/1000;\n\n                if(angel < 268 || angel > 305) {\n                    //this.dino.getComponent('dinosour').dinoLife = false;\n                    //cc.director.pause();\n                    this.NoMoreQTE = true;\n                    //this.gameMan.getComponent('lazy_game_gameMan').score  = -300;\n                    this.QTEend();\n                    this.boss_man.getComponent('boss').setAnimState('angry');\n                    this.bossState = 'angry';\n                    cc.log('fail1');\n                }\n                else {\n                    this.QTEing = false;\n                    if(angel > 272 && angel < 282){\n                        //分數 double\n                        this.boss_man.getComponent('boss').setAnimState('back');\n                        this.NoMoreQTE = true;\n                        this.gameMan.getComponent('lazy_game_gameMan').score += 400;\n                        this.QTEend();\n                        cc.log('success QTE');\n\n                        this.gameMan.getComponent('lazy_game_gameMan').successGame();\n                        \n                        \n                    }\n                    //272 282\n                    else {\n                        //get score\n                        this.boss_man.getComponent('boss').setAnimState('back');\n                        this.NoMoreQTE = true;\n                        this.gameMan.getComponent('lazy_game_gameMan').score += 200;\n                        this.QTEend();\n                        cc.log('success QTE');\n\n                        this.gameMan.getComponent('lazy_game_gameMan').successGame();\n                        \n                    }\n                    //cc.log('1');\n                    //cc.log('yes');\n                    //cc.director.pause();\n                }\n                \n            }\n            else if(this.current_QTE == 2){\n                //let during = (end - this.Begin)/1000;\n\n                if(angel < 330) {\n                    //this.dino.getComponent('dinosour').dinoLife = false;\n                    //cc.director.pause();\n                    this.NoMoreQTE = true;\n                    //this.gameMan.getComponent('lazy_game_gameMan').score  = -300;\n                    this.QTEend();\n                    this.boss_man.getComponent('boss').setAnimState('angry');\n                    this.bossState = 'angry';\n                    cc.log('fail2');\n                }\n                else {\n                    this.QTEing = false;\n                    if(angel > 330 && angel > 341){\n                        this.boss_man.getComponent('boss').setAnimState('back');\n                        this.NoMoreQTE = true;\n                        this.gameMan.getComponent('lazy_game_gameMan').score += 400;\n                        this.QTEend();\n                        cc.log('success QTE');\n\n                        this.gameMan.getComponent('lazy_game_gameMan').successGame();\n                        //this.QTE_count++;\n                        \n                    }\n                    //330 341\n                    else {\n                        //score\n                        this.boss_man.getComponent('boss').setAnimState('back');\n                        this.NoMoreQTE = true;\n                        this.gameMan.getComponent('lazy_game_gameMan').score += 200;\n                        this.QTEend();\n                        cc.log('success QTE');\n\n                        this.gameMan.getComponent('lazy_game_gameMan').successGame();\n                        //this.QTE_count++;\n                        \n                    }\n                    //cc.log('2');\n                    //cc.log('yes');\n                    //cc.director.pause();\n                }\n               \n            }\n            else if(this.current_QTE == 3){\n                //let during = (end - this.Begin)/1000;\n\n                if(angel < 69 || angel > 130) {\n                    //this.dino.getComponent('dinosour').dino_Life = false;\n                    //cc.director.pause();\n                    this.NoMoreQTE = true;\n                    //this.gameMan.getComponent('lazy_game_gameMan').score  = -300;\n                    this.QTEend();\n                    this.boss_man.getComponent('boss').setAnimState('angry');\n                    this.bossState = 'angry';\n                    cc.log('fail3');\n                }\n                else {\n                    this.QTEing = false;\n                    if(angel > 77 && angel < 85){\n                        this.boss_man.getComponent('boss').setAnimState('back');\n                        this.NoMoreQTE = true;\n                        this.gameMan.getComponent('lazy_game_gameMan').score += 400;\n                        this.QTEend();\n                        cc.log('success QTE');\n\n                        this.gameMan.getComponent('lazy_game_gameMan').successGame();\n                        //this.QTE_count++;\n                        \n                    }\n                    //77 85 \n                    else {\n                        //score\n                        this.boss_man.getComponent('boss').setAnimState('back');\n                        this.NoMoreQTE = true;\n                        this.gameMan.getComponent('lazy_game_gameMan').score += 200;\n                        this.QTEend();\n                        cc.log('success QTE');\n\n                        this.gameMan.getComponent('lazy_game_gameMan').successGame();\n                        //this.QTE_count++;\n                        \n                    }\n                    //cc.log('3');\n                    //cc.log('yes');\n                    //cc.director.pause();\n                }\n            }\n\n\n        }\n    }\n\n    private QTEend(){\n        //this.QTEing = false;\n        this.QTE[this.current_QTE].opacity = 0;\n        this.needle.opacity = 0;\n        //this.boss.opacity = 0;\n        this.QTE_count = true;\n    }\n    \n\n    private occur(){\n        //this.QTE_count++;\n        this.QTEing = true;\n        this.QTE[this.current_QTE].x = this.random_x;\n        this.QTE[this.current_QTE].y = this.random_y;\n        this.needle.x = this.random_x-15;\n        this.needle.y = this.random_y;\n\n\n        this.QTE[this.current_QTE].opacity = 255;\n        //this.boss.opacity = 255;\n        this.needle.opacity = 255;\n        //cc.log(\"fff\");\n        this.needle_turnAround();\n\n        \n\n        \n    }\n\n    private random_choose(){\n        this.Time = Math.random()*3 + 2;\n        cc.log(this.Time);\n        this.current_QTE = Math.floor(Math.random()*4);\n        this.random_x = Math.floor(Math.random()*600)+200;\n        this.random_y = Math.floor(Math.random()*350)+200;\n    }\n\n    start () {\n        //this.random_choose();\n        /*this.schedule(()=>{\n            if(!this.NoMoreQTE && this.QTE_count<=3){\n                 cc.audioEngine.playMusic(this.QTE_clip,false);\n                window.setTimeout(()=>{\n                    this.random_choose();\n                    this.occur();\n                },500)\n            }\n        },6);\n        cc.log(this.Time);*/\n    }\n\n    catchDetect(){\n        cc.log('boss is catching!');\n        this.bossState = 'catch';\n    }\n\n    \n\n\n    update (dt) {\n        /*\n        var userRef = firebase.database().ref(\"/user/\" + this.user_ID);\n        userRef.on(\"value\", (snapshot)=>{\n            this.bossState = snapshot.val().bossState;\n        })\n        */\n\n        if(this.bossState == 'catch' && !this.QTEing){ //偵測boss 狀態\n            this.random_choose();\n            this.occur();\n        }\n        if(this.QTEing) this.traggQTE();\n    }\n}\n"]}