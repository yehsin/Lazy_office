{"version":3,"sources":["../../../../assets/script/assets/script/boss.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"../../../../assets/script","sourcesContent":["import fa from \"../../build/web-desktop/src/assets/script/firebase\";\n\nconst {ccclass, property} = cc._decorator;\n\n@ccclass\nexport default class boss extends cc.Component {\n\n    private anim_str:string = \"\"; // \"sleep\" \"walk\" \"catch\" \"angry\" \"back\"\n\n    private animPlay : cc.Animation = null;\n\n    private animState;\n\n    private boss_state:string = \"\";\n\n    private sleep_time:number = 3;\n\n    private isCatch:boolean = false;\n\n    private scene:string=\"\";\n\n    private user_ID:string = \"\";\n\n    private isSend:boolean = false;\n\n    private isStart:boolean =false;\n\n    @property(cc.Node)\n    computer: cc.Label = null;\n\n    @property(cc.Node)\n    QTE: cc.Label = null;\n\n    @property(cc.Node)\n    gameMgr: cc.Label = null;\n\n    @property(cc.Node)\n    lazygameMgr: cc.Label = null;\n\n    @property({ type: cc.AudioClip })\n    walking_sound: cc.AudioClip = null;\n\n    private score:number = 0;\n    private totalScore:number = 0;\n    private HScore:number = 0;\n\n    \n\n\n    // LIFE-CYCLE CALLBACKS:\n\n    onKeyDown(event){\n        //cc.log(\"Key Down: \" + event.keyCode);\n        if (event.keyCode == cc.macro.KEY.q){\n            cc.log(\"debug mode long\");\n\n            if(this.isStart ){\n                if(this.animState.name=='sleep' )\n                    this.animState.repeatCount = 7;\n            }\n            \n            \n        }\n        else if(event.keyCode == cc.macro.KEY.e){\n            cc.log(\"debug mode short\");\n\n            if(this.isStart ){\n                if(this.animState.name=='sleep' )\n                    this.animState.repeatCount = 1;\n            }\n\n        }\n        \n       \n    }\n\n    onLoad () {\n        cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN, this.onKeyDown, this);\n        this.isStart = false;\n        \n        this.anim_str = \"\";\n        this.loadAnimStr();\n        this.animPlay = this.getComponent(cc.Animation);\n    }\n\n    getRandomInt(max) {\n        return Math.floor(Math.random() * Math.floor(max))+3;\n    }\n\n    loadAnimStr() {\n        \n        var userEmail = firebase.auth().currentUser.email;\n        let split_name = userEmail.split('@');\n        this.user_ID = split_name[0];\n\n        var userRef = firebase.database().ref(\"/user/\" + this.user_ID);\n        userRef.once(\"value\", (snapshot) => {\n          cc.log(\n            'bossState',snapshot.val().bossState\n          );\n\n          /* //TODO:\n          if(this.scene!='working'){\n              this.score =snapshot.val().Score;\n              this.totalScore= snapshot.val().totalScore;\n              this.HScore = snapshot.val().HScore;\n\n          }\n          */\n         \n    \n          this.anim_str = snapshot.val().bossState;\n          if(snapshot.val().status==\"endgame_restart\"){\n              cc.log(\"endgame_restart\");\n            if(this.anim_str==\"sleep\"){\n                this.sleep_time = 1;\n            }\n        }\n          cc.log(\"load boss state:\",this.anim_str);\n          //if(this.anim_str){\n            this.animState = this.animPlay.play(this.anim_str);\n\n            this.isStart = true;\n          //}\n          if(this.anim_str=='sleep'){\n            this.animState.wrapMode = cc.WrapMode.Loop;\n            this.animState.repeatCount = this.sleep_time; \n            cc.log(this.sleep_time);\n            }\n    \n          \n        });\n\n        \n      }\n      GameOver(){\n        //cc.audioEngine.pauseAll();\n        //cc.audioEngine.playMusic(this.bgm_success,true); //TODO: cannot play \n    \n        //cc.log(\"GameOver at dino scene\");\n    \n        this.score = this.score - 300;\n\n        cc.log(\"GameOver at dino scene\",this.score);\n    \n    \n        this.totalScore = this.totalScore + this.score;\n        \n    \n        cc.audioEngine.pauseAll();\n    \n        //this.isDead = true;\n\n        var userRef = firebase.database().ref(\"/user/\" + this.user_ID);\n\n        if(this.score > this.HScore){//new record\n            userRef.update({\n                Score:this.score,\n                HScore:this.score,\n                totalScore:this.totalScore,\n                status:'start',\n                bossState:'sleep',\n                time:'180'\n\n            })\n\n        }\n        else{\n            userRef.update({\n                Score:this.score,\n                totalScore:this.totalScore,\n                status:'start',\n                bossState:'sleep',\n                time:'180'\n\n            })\n\n        }\n\n        \n    \n       \n    \n        cc.director.loadScene(\"GameOver\");\n        \n    \n      }\n\n    start () {\n        \n        this.scene = cc.director.getScene().name;\n        this.sleep_time = this.getRandomInt(3);\n\n        this.loadAnimStr();\n        \n        //this.sleep_time = this.getRandomInt(3);\n        //cc.log(\"boss start at\",this.scene);\n        //this.anim_str = \"sleep\";\n        //this.setAnim(this.anim_str);\n       // cc.log(\"start anim:\",this.anim_str);\n       /*\n        this.animState =  this.animPlay.play(this.anim_str);\n        if(this.anim_str=='sleep'){\n            this.animState.wrapMode = cc.WrapMode.Loop;\n            this.animState.repeatCount = this.sleep_time;   \n        }\n\n        //TODO: transition when angry?\n        */\n        \n        \n\n    }\n\n    setAnim(anim_s:string){\n\n        //cc.log('setAnim');\n\n        if(anim_s == this.anim_str) return;\n    \n        else{\n          this.anim_str = anim_s;\n          //cc.log('not return');\n        }\n    \n        //this.animPlay.play(this.anim_str);\n\n        this.animState = this.animPlay.play(this.anim_str);\n        //cc.log('play:',this.anim_str);\n\n        \n        if(this.anim_str == \"sleep\"){\n            this.animState.wrapMode = cc.WrapMode.Loop;\n            this.animState.repeatCount = this.sleep_time;\n            cc.log(this.sleep_time);\n        }\n        else if(this.scene!='working'&&this.anim_str=='catch'){\n            this.animState.wrapMode = cc.WrapMode.Loop;\n        }\n        else{\n            this.animState.wrapMode = cc.WrapMode.Normal;\n            this.animState.repeatCount = 1;\n\n        }\n        if(this.anim_str == 'walk'){\n            //cc.audioEngine.playEffect(this.walking_sound,false);\n        }\n        \n    \n        \n    \n    \n      }\n   \n    getAnimState(){\n        return this.animState.name;\n    }\n\n    setAnimState(anim:string){\n        cc.log(anim);\n        this.setAnim(anim);\n        \n    }\n\n    update (dt) {\n\n        if(this.isStart==true){\n            //cc.log(this.isCatch);\n            if(this.animState && this.animState.isPlaying == false && this.animState.isPaused==false){\n                //cc.log(\"stop\")\n                if(this.animState.name==\"walk\"){\n                    this.isSend = false;\n                   \n                    this.sleep_time = this.getRandomInt(3);\n                    //this.anim_str = \"catch\";\n                    this.setAnim(\"catch\");\n                }\n                else if(this.animState.name==\"sleep\"){\n                    //this.anim_str = \"walk\";\n                    this.setAnim(\"walk\");\n                }\n                else if(this.animState.name==\"catch\"){\n                    if(this.scene == 'working') this.setAnim(\"back\");\n                    //this.anim_str = \"back\";\n                    \n                   \n                }\n                else if(this.animState.name==\"walk\"){\n                    //this.anim_str = \"catch\";\n                    this.setAnim( \"catch\");\n                }\n                else if(this.animState.name == \"angry\"){\n                    if(this.isCatch ==false){\n                        this.isCatch = true;\n                        cc.log(\"call gameover\");\n    \n                        if(this.scene=='working'){\n                            this.gameMgr.getComponent('maingame_mgr').GameOver();\n                        }\n                        else {\n                            this.QTE.getComponent('QTE').changeQTEingState();\n                            this.lazygameMgr.getComponent('lazy_game_gameMan').GameOver();\n                        }\n    \n                    }\n                    //call function at maingame_mgr\n                }\n                else if(this.animState.name == \"back\"){\n                    //this.anim_str = \"sleep\";\n                    this.isCatch = false;\n                    this.setAnim(\"sleep\");\n                }\n    \n                //cc.log('try to play:',this.anim_str);\n            }\n            else if(this.animState.isPlaying == true && this.animState.name == \"catch\"){\n                //cc.log(\"workstate:\",this.computer.getComponent('computer').getPlayingState());\n                if(this.scene=='working'){\n\n                    if(this.computer.getComponent('computer').getPlayingState() == false && this.computer.getComponent('computer').getWorkingState()==false){ //\n                        if(this.isCatch==false){\n                            this.isCatch=true;\n                            this.gameMgr.getComponent('maingame_mgr').updateScore(-100);\n                        }\n                        \n                        //cc.log(\"nothing happen\");\n                    }\n                    else if(this.computer.getComponent('computer').getPlayingState() == true && this.computer.getComponent('computer').getWorkingState()==false){\n                        //cc.log(\"lazy!!\");\n                        //this.anim_str=\"angry\";\n                        this.setAnim(\"angry\");\n                        \n        \n                    }\n    \n                }\n                else{//dino\n                    \n                    if(this.isSend==false){\n                        this.isSend = true;\n                        this.QTE.getComponent('QTE').catchDetect();\n                    }\n    \n                }\n                \n    \n            }\n\n        }\n\n        //cc.log(this.anim_str,this.animState.name,this.animState.isPlaying);\n       // cc.log(this.animState.name,this.animState.isPlaying,this.animState.isPaused);\n\n        \n\n\n\n    }\n}\n"]}